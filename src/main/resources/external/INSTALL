#!/bin/bash

IFS=''

echo  --------------------------------
echo "Welcome to the textify installer"
echo  --------------------------------
# remove really old installs
echo -e "\e[1;32m Removing really old installations... \e[0m"
sudo rm -f /usr/local/bin/textify-*.jar
sudo rm -f /usr/local/bin/textify
rm -f /usr/share/icons/hicolor/scalable/apps/textify.svg
echo
# remove previous install
echo -e "\e[1;32m Removing previous installation... \e[0m"
rm -f $HOME/.local/share/textify/swt.textify-*.jar
rm -f $HOME/.local/bin/textify
rm -f $HOME/.local/share/applications/textify.desktop
echo
# install new stuff
echo -e "\e[1;32m Creating install folders... \e[0m"
mkdir -p $HOME/.local/bin/
mkdir -p $HOME/.local/share/textify/
echo
# add to path
echo -e "\e[1;32m Adding $HOME/.local/bin to PATH \e[0m"
export PATH=$HOME/.local/bin/:$PATH
echo
# copy jar
echo -e "\e[1;32m Copying current release jar to system... \e[0m"
cp install-files/swt.textify-*.jar $HOME/.local/share/textify/
echo
# copy icon
echo -e "\e[1;32m Copying icon to system... \e[0m"
sudo cp install-files/textify.svg /usr/share/icons/hicolor/scalable/apps/
echo
# make launcher executable 
echo -e "\e[1;32m Making launcher executable... \e[0m"
chmod +x install-files/textify
echo
# copy launcher
echo -e "\e[1;32m Copying launcher to system... \e[0m"
cp install-files/textify $HOME/.local/bin/
echo
# copy .desktop
echo -e "\e[1;32m Copying .desktop file to system... \e[0m"
cp install-files/textify.desktop $HOME/.local/share/applications/
echo
echo -e "\e[1;32m Done :) \e[0m"
